C functions and nested while loops
